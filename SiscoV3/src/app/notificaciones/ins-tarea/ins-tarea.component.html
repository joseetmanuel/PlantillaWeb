<mat-spinner *ngIf='spinner' class="spinner"></mat-spinner>
<app-breadcrumbs *ngIf="breadcrumb" [ruta]="breadcrumb">
</app-breadcrumbs>
<div [formGroup]="tareaForm">
    <mat-card class="cardMarginBottom">
        <div class="row">
            <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12">
                <img class='imagenIconoGris' src="../../../assets/images/iconos-tarea/tareas_color.png"> &nbsp;&nbsp;&nbsp;
                <span>Creación de tarea</span>
            </div>
        </div>
        <hr>
        <div class="row">
            <div class="col-6 col-sm-6 col-md-6 col-lg-6 col-xl-6">
                <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12">
                    <app-buscador [IBuscador]="buscador" (responseBuscador)="responseBuscador($event)">
                    </app-buscador>
                </div>
            </div>
            <div class="col-6 col-sm-6 col-md-6 col-lg-6 col-xl-6">
                <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" *ngFor="let usuario of usuariosAsignados">
                    <app-usuario-tarea [usuario]="usuario" (usuarioTarea)="removerUsuario($event)">
                    </app-usuario-tarea>
                </div>
            </div>
        </div>
        <hr>
        <div class="row">
            <div class="col-12 col-sm-12 col-md-6 col-lg-6 col-xl-6">
                <mat-form-field class="inputFullWide">
                    <input matInput placeholder="Título de la tarea *" maxlength='100' formControlName="titulo">
                </mat-form-field>
            </div>
            <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12">
                <mat-form-field class="inputFullWide">
                    <textarea class="NoResize" matInput placeholder="Descripción de la tarea *" maxlength='500' rows="4" formControlName="descripcion"></textarea>
                </mat-form-field>
            </div>
            <div class="col-12 col-sm-12 col-md-6 col-lg-6 col-xl-6">
                <mat-form-field class="inputFullWide">
                    <input matInput [matDatepicker]="fechaVencimiento" placeholder="Fecha vencimiento *" formControlName="fechaVencimiento">
                    <mat-datepicker-toggle matSuffix [for]="fechaVencimiento"></mat-datepicker-toggle>
                    <mat-datepicker #fechaVencimiento></mat-datepicker>
                </mat-form-field>
            </div>
            <div class="col-12 col-sm-12 col-md-6 col-lg-6 col-xl-6">
                <mat-form-field class="inputFullWide">
                    <mat-select placeholder="Prioridad *" formControlName="prioridad">
                        <mat-option *ngFor='let prioridad of prioridades' [value]="prioridad.id">
                            {{prioridad.nombre}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
            <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12">
                <div class="form-group row">
                    <label class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12">Adjuntos</label>
                    <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12">
                        <app-file-upload-component [IUploadFile]="IUploadFile" (messageEvent)="ResultUploadFile($event)">
                        </app-file-upload-component>
                    </div>
                </div>
            </div>
            <br>
            <div class="col-sm-12 col-md-12 col-xl-12 text-center">
                <button class="mb-2 mr-2 btn-square border-0 btn-transition btn btn-outline-primary float-right" (click)='guardarTarea()' [disabled]="!tareaForm.valid">
                                    <i class="pe-7s-diskette btn-icon-wrapper">
                                    </i>
                                    Agregar
                                </button>
            </div>
        </div>
    </mat-card>
</div>